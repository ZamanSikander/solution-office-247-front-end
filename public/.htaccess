# Enable Rewrite Engine
RewriteEngine On
RewriteBase /

# Serve index.html for SPA routes
RewriteRule ^index\.html$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]

# Example redirects (clean URLs)
Redirect 301 /services/pages/frontend /frontend
Redirect 301 /services/pages/academicswriting /academicswriting
Redirect 301 /services/pages/ecommerce /ecommerce

# Redirect all HTTP â†’ HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# -----------------------------
# Prerender.io integration
# -----------------------------
<IfModule mod_headers.c>
  # Set your Prerender token in the request header
  RequestHeader set X-Prerender-Token "PDy033CZWv6FNxs3L9n6"
</IfModule>

<IfModule mod_rewrite.c>
  RewriteEngine On

  # Skip if request already came from Prerender
  RewriteCond %{HTTP:X-Prerender} ^$

  # Detect bots (add more if needed)
  RewriteCond %{HTTP_USER_AGENT} googlebot|bingbot|yandex|baiduspider|facebookexternalhit|twitterbot|rogerbot|linkedinbot|embedly|quora|slackbot|vkShare|W3C_Validator|redditbot|applebot|pingdom|ahrefsbot [NC]

  # Proxy bot requests to Prerender.io
  RewriteRule ^(.*)$ https://service.prerender.io/https://solutionoffice247.com/$1 [P,L]
</IfModule>
